(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7c15"],{"77ba":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("work-console"),o("work-table",{on:{"file-dialog":e.fileDialog}}),o("file-dialog",{attrs:{show:e.dialogVisible,file:e.file},on:{close:function(t){e.dialogVisible=!1}}})],1)},n=[],i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{attrs:{model:e.queryForm,inline:!0}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),o("el-form-item",[o("el-select",{attrs:{placeholder:"科目"},model:{value:e.queryForm.courseName,callback:function(t){e.$set(e.queryForm,"courseName",t)},expression:"queryForm.courseName"}},[o("el-option",{attrs:{label:"区域一",value:"shanghai"}}),o("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),o("el-button",{attrs:{type:"primary",icon:"el-icon-search"}},[e._v("查询")]),o("el-button",{ref:"refreshBtn",attrs:{type:"primary",loading:e.inLoading,icon:"el-icon-refresh"},on:{click:e.fetchWork}},[e._v("手动更新")]),e.premission?o("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")]):e._e()],1),o("create-dialog",{attrs:{show:e.dialogVisible},on:{close:function(t){e.dialogVisible=!1}}})],1)},a=[],r=(o("4160"),o("caad"),o("2532"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"添加作业",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{attrs:{model:e.createForm,"label-width":"auto"}},[o("el-form-item",{attrs:{prop:"name",label:"作业名称",required:""}},[o("el-col",{attrs:{span:10}},[o("el-input",{attrs:{autocomplete:"off",placeholder:"请填写名称"},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1)],1),o("el-form-item",{attrs:{prop:"courseName",label:"科目",required:""}},[o("el-select",{attrs:{placeholder:"请选择科目"},model:{value:e.createForm.courseName,callback:function(t){e.$set(e.createForm,"courseName",t)},expression:"createForm.courseName"}},[o("el-option",{attrs:{label:"区域一",value:"shanghai"}}),o("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),o("el-form-item",{attrs:{label:"选择日期"}},[o("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.createForm.date,callback:function(t){e.$set(e.createForm,"date",t)},expression:"createForm.date"}})],1),o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.createForm.remark,callback:function(t){e.$set(e.createForm,"remark",t)},expression:"createForm.remark"}})],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.createFormSubmit}},[e._v("确 定")])],1)],1)}),s=[],c={name:"Create",data:function(){return{dialogVisible:!1,createForm:{name:"",courseName:"",date:"",remark:""}}},props:{show:Boolean},watch:{show:function(e){this.dialogVisible=e},dialogVisible:function(e){e||this.$emit("close")}},methods:{createFormSubmit:function(){alert("创建")}}},u=c,m=o("2877"),d=Object(m["a"])(u,r,s,!1,null,null,null),f=d.exports,p={name:"Console",data:function(){return{dialogVisible:!1,addVisible:!1,inLoading:!1,queryForm:{name:"",courseName:""}}},components:{CreateDialog:f},computed:{premission:function(){var e=this,t=["admin","editor"],o=!1;return t.forEach((function(t){e.$store.getters.roles.includes(t)&&(o=!0)})),o}},methods:{fetchWork:function(){var e=this;this.inLoading=!0,this.$store.dispatch("work/info").then((function(){e.inLoading=!1,e.$message({message:"更新成功",type:"success"})}))}}},b=p,h=Object(m["a"])(b,i,a,!1,null,null,null),g=h.exports,v=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-table",{attrs:{data:e.workList}},[o("el-table-column",{attrs:{prop:"name",label:"名称"}}),o("el-table-column",{attrs:{prop:"courseName",label:"科目"}}),o("el-table-column",{attrs:{prop:"start",label:"开始日期"}}),o("el-table-column",{attrs:{prop:"end",label:"截止日期"}}),o("el-table-column",{attrs:{prop:"remark",label:"备注"}}),o("el-table-column",{attrs:{prop:"number",label:"收集情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-progress",{attrs:{percentage:e.percentage(56,t.row.number),"stroke-width":18,"text-inside":!0}}),e._v(" "+e._s(t.row.number)+"/56 ")]}}])}),o("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button-group",[t.row.file?o("el-button",{attrs:{type:"primary",size:"mini",plain:0==t.row.file.length},on:{click:function(o){return e.$emit("file-dialog",t.row.file)}}},[e._v(" 文件")]):e._e(),o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},slot:"content"},[e._v(" id："+e._s(t.row.id)),o("br"),e._v("发布者："),o("br"),e._v("发布时间： ")]),o("el-button",{attrs:{size:"mini",icon:"el-icon-more"}})],1)],1),o("el-button-group",{staticStyle:{"margin-left":"10px"}},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-download"},on:{click:function(o){return e.downloadItem(t.row.id)}}}),o("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(o){return e.delItem(t.row.id)}}})],1)]}}])})],1)},k=[],y={name:"Table",data:function(){return{itemWidth:"130px"}},computed:{workList:function(){return this.$store.getters.workList}},methods:{percentage:function(e,t){return Math.round(t/e*100)},downloadItem:function(e){alert("下载".concat(e))},delItem:function(e){this.$confirm("确定删除这项作业吗","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){alert("执行删除".concat(e))})).catch((function(){}))}}},w=y,_=Object(m["a"])(w,v,k,!1,null,null,null),F=_.exports,x=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"文件",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("h3",[e._v("科目 - 课堂练习 的文件")]),o("el-upload",{attrs:{action:e.actionLink(),"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"on-error":e.handleError,"before-remove":e.handleRemove,"file-list":e.file,"auto-upload":!1,limit:1}},[o("div",{attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传一个文件，且不超过20MB ")]),o("el-button",{attrs:{slot:"trigger",type:"primary",disabled:1===e.file.length},slot:"trigger"},[o("i",{staticClass:"el-icon-folder-opened"}),e._v(" 选择文件 ")]),o("el-button",{ref:"submitUploadButton",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",disabled:1===e.file.length},on:{click:e.submitUpload}},[o("i",{staticClass:"el-icon-upload2"}),e._v(" 上传文件 ")]),o("el-button",{attrs:{type:"primary",disabled:0===e.file.length},on:{click:e.downloadFile}},[o("i",{staticClass:"el-icon-download"}),e._v(" 下载文件 ")])],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)],1)},$=[],V={name:"FileDialog",data:function(){return{dialogVisible:!1}},props:{show:Boolean,file:Array},watch:{show:function(e){this.dialogVisible=e},dialogVisible:function(e){e||this.$emit("close")}},computed:{},methods:{actionLink:function(){return"/api/work/upload"},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，请删除后再选择文件。")},handleRemove:function(e,t){var o=this;return this.$confirm("此操作将永久删除该文件，是否继续","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.$message({type:"success",message:"删除成功"}),o.fileList=[]})).catch((function(){o.$message({type:"info",message:"已取消删除"})})),!1},submitUpload:function(){this.$refs.upload.submit()},downloadFile:function(){alert("在做了")},handleSuccess:function(){this.$confirm("上传成功！","消息",{confirmButtonText:"好的",callback:function(e){console.log("此时刷新列表")}})},handleError:function(){var e=this;this.$alert("上传失败","严重",{confirmButtonText:"确定",callback:function(t){e.$message({type:"error",message:"上传失败"})}})}}},B=V,q=Object(m["a"])(B,x,$,!1,null,null,null),E=q.exports,L={name:"WorkIndex",data:function(){return{dialogVisible:!1,file:[]}},components:{WorkConsole:g,WorkTable:F,FileDialog:E},methods:{fileDialog:function(e){this.dialogVisible=!0,this.file=e}}},N=L,S=Object(m["a"])(N,l,n,!1,null,null,null);t["default"]=S.exports}}]);
//# sourceMappingURL=chunk-2d0d7c15.611e6af1.js.map